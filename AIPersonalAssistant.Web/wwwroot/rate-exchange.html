<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Exchange - AI Personal Assistant</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/rate-exchange.css?v=20260123-01">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Force deployment refresh 2026-01-23-01 -->
</head>
<body>
    <div class="header">
        <h1>Rate Exchange</h1>
        <button id="backBtn">Back to Tools</button>
    </div>

    <div class="container">
        <div class="form-card">
            <h2>Currency Converter</h2>
            <form id="exchangeForm">
                <div class="form-row">
                    <div class="form-group form-group-flex">
                        <label for="fromCurrency">From Currency</label>
                        <select id="fromCurrency" name="fromCurrency" required>
                            <option value="">Select currency...</option>
                            <option value="US">United States (USD)</option>
                            <option value="CAD">Canada (CAD)</option>
                            <option value="MX">Mexico (MXN)</option>
                            <option value="CO">Colombia (COP)</option>
                        </select>
                    </div>

                    <div class="form-group form-group-flex">
                        <label for="amount">Amount</label>
                        <input type="number" id="amount" name="amount" value="1" min="0.01" max="999999999" step="0.01" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>To Currency (Select one or more)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="toCurrency" value="US">
                            <span>United States (USD)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="toCurrency" value="CAD">
                            <span>Canada (CAD)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="toCurrency" value="MX">
                            <span>Mexico (MXN)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="toCurrency" value="CO">
                            <span>Colombia (COP)</span>
                        </label>
                    </div>
                </div>

                <button type="submit" class="calculate-btn">Calculate Exchange Rates</button>
            </form>
        </div>

        <div id="resultsSection" class="results-card" style="display: none;">
            <h2>Conversion Results</h2>
            <div id="resultsContent"></div>
        </div>

        <div id="historyChartSection" class="section-card" style="display:none;">
            <h3>ðŸ“Š 30-Day Historical Rates</h3>
            <div style="position:relative; height:300px;">
                <canvas id="historyChart"></canvas>
            </div>
        </div>

        <div id="errorSection" class="error-card" style="display: none;">
            <p id="errorMessage"></p>
        </div>

        <!-- Historical Exchange Rate Chart -->
        <div class="section-card" id="timeSeriesSection" style="margin-top: 2rem;">
            <h3>ðŸ“ˆ Historical Exchange Rate Chart</h3>
            <div class="timeseries-controls" style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: end; margin-bottom: 1rem;">
                <div>
                    <label for="tsFromCurrency">From Currency</label>
                    <select id="tsFromCurrency" class="form-control">
                        <option value="US">USD - US Dollar</option>
                        <option value="CA">CAD - Canadian Dollar</option>
                        <option value="MX">MXN - Mexican Peso</option>
                        <option value="EU">EUR - Euro</option>
                        <option value="GB">GBP - British Pound</option>
                        <option value="JP">JPY - Japanese Yen</option>
                        <option value="CO">COP - Colombian Peso</option>
                    </select>
                </div>
                <div>
                    <label for="tsToCurrency">To Currency</label>
                    <select id="tsToCurrency" class="form-control">
                        <option value="CA">CAD - Canadian Dollar</option>
                        <option value="MX">MXN - Mexican Peso</option>
                        <option value="EU">EUR - Euro</option>
                        <option value="GB">GBP - British Pound</option>
                        <option value="JP">JPY - Japanese Yen</option>
                        <option value="US">USD - US Dollar</option>
                        <option value="CO">COP - Colombian Peso</option>
                    </select>
                </div>
                <div>
                    <label for="tsStartDate">Start Date</label>
                    <input type="date" id="tsStartDate" class="form-control" />
                </div>
                <div>
                    <label for="tsEndDate">End Date</label>
                    <input type="date" id="tsEndDate" class="form-control" />
                </div>
                <button id="tsLoadBtn" class="btn btn-primary" onclick="loadTimeSeries()">Show History</button>
            </div>
            <div id="tsNote" style="display:none; color: #856404; background: #fff3cd; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;"></div>
            <div id="tsChartContainer" style="display:none; position:relative; height:400px;">
                <canvas id="timeSeriesChart"></canvas>
            </div>
            <div id="tsNoData" style="display:none; text-align:center; color:#666; padding:2rem;">No data available for the selected currencies and date range.</div>
        </div>
    </div>

    <script src="/js/rate-exchange.js?v=20260122-01"></script>
</body>
</html>
